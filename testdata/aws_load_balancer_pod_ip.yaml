# aws_load_balancer_pod_ip.yaml
# 이 파일은 CheckAwsLoadBalancerPodIp 함수 테스트를 위한 다양한 케이스를 정의합니다.

- name: "All resources correct"
  expect_pass: true
  ingresses:
    - namespace: "default"
      name: "ingress-1"
      annotations:
        alb.ingress.kubernetes.io/target-type: "ip"
  services:
    - namespace: "default"
      name: "service-1"
      annotations:
        service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: "ip"
      ownerReferences:
        - kind: "Ingress"
          name: "ingress-1"

- name: "Ingress missing target type"
  expect_pass: false
  ingresses:
    - namespace: "default"
      name: "ingress-2"
      annotations:
        alb.ingress.kubernetes.io/target-type: ""
  services:
    - namespace: "default"
      name: "service-2"
      annotations:
        service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: "ip"
      ownerReferences:
        - kind: "Ingress"
          name: "ingress-2"

- name: "Ingress with instance target type"
  expect_pass: false
  ingresses:
    - namespace: "default"
      name: "ingress-3"
      annotations:
        alb.ingress.kubernetes.io/target-type: "instance"
  services:
    - namespace: "default"
      name: "service-3"
      annotations:
        service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: "ip"
      ownerReferences:
        - kind: "Ingress"
          name: "ingress-3"

- name: "Service annotation incorrect"
  expect_pass: false
  ingresses:
    - namespace: "default"
      name: "ingress-4"
      annotations:
        alb.ingress.kubernetes.io/target-type: "ip"
  services:
    - namespace: "default"
      name: "service-4"
      annotations:
        service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: "instance"
      ownerReferences:
        - kind: "Ingress"
          name: "ingress-4"

- name: "No ingress and no service"
  expect_pass: true
  ingresses: []
  services: []
